# ADR 0001: Boas Práticas de Colaboração com Git e GitHub

## Status
Aceito

## Contexto
O projeto "Desenvolvimento de Software" é um sistema de gerenciamento financeiro pessoal desenvolvido em equipe usando uma arquitetura monorepo com Node.js (backend) e React (frontend). Para garantir a qualidade do código e facilitar a colaboração entre desenvolvedores, precisamos estabelecer práticas claras de versionamento, colaboração e integração de código.

## Decisão

### 1. Fluxo de Colaboração (Git Flow Simplificado)

**Branches Principais:**
- `main`: Branch de produção, sempre estável
- `develop`: Branch de desenvolvimento, integração contínua

**Fluxo de Trabalho:**
1. **Issues**: Toda nova funcionalidade ou correção deve começar com uma issue
2. **Feature Branches**: Criar branch a partir de `develop` para cada feature/fix
3. **Pull Requests**: Obrigatório para integrar código em `develop` ou `main`
4. **Code Review**: Pelo menos 1 aprovação necessária antes do merge
5. **Testes**: CI/CD deve passar antes do merge

### 2. Convenções de Nomenclatura

**Branches:**
```
feature/nome-da-funcionalidade
fix/nome-do-bug
hotfix/correcao-urgente
docs/atualizacao-documentacao
refactor/melhoria-codigo
```

**Commits (Conventional Commits):**
```
feat: adiciona nova funcionalidade
fix: corrige bug específico
docs: atualiza documentação
style: formatação de código
refactor: refatoração sem mudança de funcionalidade
test: adiciona ou corrige testes
chore: tarefas de manutenção
```

**Exemplos:**
```
feat(auth): implementa sistema de login JWT
fix(api): corrige validação de dados de entrada
docs(readme): atualiza instruções de instalação
```

### 3. Checklist de Integração

**Antes de criar Pull Request:**
- [ ] Código segue as convenções estabelecidas
- [ ] Testes passam localmente (`npm test`)
- [ ] Build funciona sem erros (`npm run build`)
- [ ] Linting aprovado (`npm run lint`)
- [ ] Documentação atualizada se necessário
- [ ] Branch atualizada com `develop`
- [ ] Commits seguem padrão Conventional Commits

**Template de Pull Request:**
```markdown
## Descrição
Breve descrição das mudanças

## Tipo de Mudança
- [ ] Bug fix
- [ ] Nova funcionalidade  
- [ ] Breaking change
- [ ] Documentação

## Como Testar
1. Passo 1
2. Passo 2
3. Resultado esperado

## Checklist
- [ ] Código testado localmente
- [ ] Documentação atualizada
- [ ] Testes passando
```

### 4. Configuração Local do Projeto

**Pré-requisitos:**
- Node.js 22+
- npm 10+
- Git

**Setup Inicial:**
```bash
# 1. Clone e acesse o projeto
git clone https://github.com/dejardim/Projeto-DS.git
cd Projeto-DS

# 2. Instale dependências (ordem importante)
npm install                    # Turbo (gerenciador monorepo)
npm install -w apps/server     # Dependências do backend
npm install -w apps/web        # Dependências do frontend

# 3. Configure ambiente
cp apps/server/.env.example apps/server/.env
# Edite o .env com suas configurações

# 4. Execute o projeto
npm run dev                    # Inicia backend + frontend
```

**Comandos Úteis:**
```bash
# Desenvolvimento
npm run dev              # Inicia ambos os apps
npm run build            # Build de produção
npm run test             # Executa testes
npm run lint             # Verifica código

# Backend específico
cd apps/server
npm run db:studio        # Interface do banco
npm run db:migrate       # Migrações

# Frontend específico  
cd apps/web
npm run preview          # Preview do build
```

### 5. Estrutura de Issues

**Labels Padrão:**
- `bug`: Correções de bugs
- `enhancement`: Novas funcionalidades
- `documentation`: Melhorias na documentação
- `good first issue`: Bom para iniciantes
- `help wanted`: Precisa de ajuda
- `priority-high`: Alta prioridade

**Template de Issue:**
```markdown
## Descrição
Descrição clara do problema ou funcionalidade

## Comportamento Esperado
O que deveria acontecer

## Comportamento Atual
O que está acontecendo

## Passos para Reproduzir
1. Passo 1
2. Passo 2
3. Erro ocorre

## Ambiente
- OS: [Windows/Mac/Linux]
- Node.js: [versão]
- Browser: [se aplicável]
```

## Consequências

**Positivas:**
- Código mais organizado e rastreável
- Facilita onboarding de novos desenvolvedores
- Reduz conflitos de merge
- Melhora qualidade através de code review
- Histórico claro de mudanças

**Negativas:**
- Processo inicial mais lento
- Requer disciplina da equipe
- Overhead de documentação

## Implementação

1. **Imediato:**
   - Criar templates de PR e Issue no GitHub
   - Configurar branch protection rules
   - Atualizar CONTRIBUTING.md

2. **Curto Prazo:**
   - Implementar CI/CD com GitHub Actions
   - Configurar ferramentas de linting automático
   - Treinar equipe nas convenções

3. **Médio Prazo:**
   - Implementar testes automatizados
   - Configurar deploy automático
   - Métricas de qualidade de código

## Referências
- [Conventional Commits](https://www.conventionalcommits.org/)
- [Git Flow](https://nvie.com/posts/a-successful-git-branching-model/)
- [GitHub Flow](https://guides.github.com/introduction/flow/)
- [Semantic Versioning](https://semver.org/)
